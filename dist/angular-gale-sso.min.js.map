{"version":3,"file":"angular-gale-sso.min.js","sources":["angular-gale-sso.js"],"names":["angular","module","run","$templateCache","put","manifiest","directive","$log","$q","$cordovaSingleSignOn","restrict","scope","onLoginSuccess","onLoginError","templateUrl","controller","$scope","$element","$timeout","vm","model","isLoading","oauth2","$$buildAuthorization","iframe","find","attr","oauth2Url","bind","delay","cancel","finaly","windowElm","element","window","fn","e","origin","hostToMatch","data","indexOf","callbackUrl","unbind","parser","then","handler","$on","provider","$this","this","_appId","_ssoBaseURL","setAppId","value","setApiUrl","endsWith","$get","$Api","self","_authResponse","getAppId","Error","getApiUrl","getAccessToken","access_token","parseFragment","uri","parsed","defer","qs","substring","split","build","tokens","j","q","text","prop","name","replace","parseInt","setTimeout","isSuccess","ok","forEach","j1","resolve","authResponse","status","j2","reject","error","promise","permissions","settings","_settings","scopes","join","response_type","redirect_uri","state","prompt","api_url","host_url","pathArray","protocol","host","url","callback_url","location","oauth2_url","login","mode","ionic","Platform","isWebView","inApp_features","browser","cordova","InAppBrowser","open","addEventListener","close","height","width","left","screen","top","browser_features","api","query","accessToken","read","sso_url","Authorization","success","err"],"mappings":";;;;;;;;;;;;AAWAA,QAAQC,OAAO,yBAA0BC,KAAK,iBAAkB,SAASC,gBACvE,YACAA,gBAAeC,IAAI,6BACjB,yIAEHJ,QAAQK,UAAU,YACf,qBACA,sBACA,sBAEA,SAEHL,QAAQC,OAAO,uBAEfK,UAAU,WAAY,OAAQ,KAAM,uBAAwB,SAASC,KAAMC,GAAIC,sBAC5E,OACIC,SAAU,IACVC,OACIC,eAAgB,IAChBC,aAAc,KAElBC,YAAa,6BACbC,YAAa,SAAU,WAAY,KAAM,WAAY,SACjDC,OACAC,SACAT,GACAU,UAEA,GAAIC,IAAKH,OAAOI,OACZC,WAAW,GAGXC,OAASb,qBAAqBc,sBAC9B,UACA,aAGAC,OAASP,SAASQ,KAAK,SAC3BD,QAAOE,KAAK,MAAOJ,OAAOK,WAE1BH,OAAOI,KAAK,OAAQ,WAEhB,GAAIC,OAAQX,SAAS,WACjBA,SAASY,OAAOD,OAEhBV,GAAGE,WAAY,CACf,IAAIU,SAAS,EACTC,UAAYhC,QAAQiC,QAAQC,QAE5BC,GAAK,SAASC,GACTL,QAAUK,EAAEC,SAAWf,OAAOgB,aAAsD,IAAvCF,EAAEG,KAAKC,QAAQlB,OAAOmB,eAEpET,UAAUU,OAAO,UAAWP,IAC5Bb,OAAOqB,OAAOP,EAAEG,MAAMK,KAAK,SAASL,MAChC,GAAIM,SAAU7B,OAAOJ,gBAClBiC,UACCA,QAAQN,OAEb,WACC,GAAIM,SAAU7B,OAAOH,cAClBgC,UACCA,QAAQN,QAGhBR,QAAS,GAGjBC,WAAUJ,KAAK,UAAWO,KAG3B,MAQPnB,OAAO8B,IAAI,WAAY,oBAMlC9C,QAAQC,OAAO,qBAEf8C,SAAS,uBAAwB,WAC9B,GAAIC,OAAQC,KAGRC,OAAS,KACTC,YAAc,IAElBF,MAAKG,SAAW,SAASC,OAErB,MADAH,QAASG,MACFL,OAGXC,KAAKK,UAAY,SAASD,OAOtB,MALIA,SAAUA,MAAME,SAAS,OACzBF,OAAS,KAGbF,YAAcE,MACPL,OAGXC,KAAKO,MAAQ,KAAM,OAAQ,SAAShD,GAAIiD,MACpC,GAAIC,MAAOT,KACPU,cAAgB,IAEpBD,MAAKE,SAAW,WACZ,IAAKV,OACD,KAAMW,OAAM,iBAEhB,OAAOX,SAGXQ,KAAKI,UAAY,WACb,IAAKX,YACD,KAAMU,OAAM,sBAEhB,OAAOV,cAGXO,KAAKK,eAAiB,WAClB,IAAKJ,cACD,KAAME,OAAM,yCAEhB,OAAOF,eAAcK,aAIzB,IAAIC,eAAgB,SAASC,KACzB,GAAIC,QAAS3D,GAAG4D,QACZC,GAAKH,IAAII,UAAUJ,IAAI1B,QAAQ,KAAO,GAAG+B,MAAM,KAE/CC,MAAQ,SAASC,QACjB,GAAIC,KACJ,KAAK,GAAIC,KAAKN,IAAI,CACd,GAAIO,MAAOP,GAAGM,EACd,KAAK,GAAIE,QAAQJ,QAAQ,CACrB,GAAIK,MAAOL,OAAOI,KAClB,IAA2B,IAAvBD,KAAKpC,QAAQsC,WAAjB,CACI,GAAIzB,OAAQuB,KAAKG,QAAQD,KAAO,IAAK,GACrCJ,GAAED,OAAOI,OAAmB,eAATC,KAAwBE,SAAS3B,OAASA,QAKzE,MAAOqB,GAsCX,OAnCAO,YAAW,WACP,GAAIC,WAAY,WACZ,GAAIC,KAAK,CAOT,OANAnF,SAAQoF,QAAQf,GAAI,SAASM,GACzB,MAAkC,KAA9BA,EAAEnC,QAAQ,iBACV2C,IAAK,GACE,GAFX,SAKGA,KAIX,IAAID,UAAW,CACX,GAAIG,IAAKb,OAAO,eACZ,aACA,cAEJb,eAAgB0B,GAChBlB,OAAOmB,SACHC,aAAcF,GACdG,OAAQ,kBAET,CACH,GAAIC,IAAKjB,OACL,SAEJL,QAAOuB,QACHF,OAAQ,gBACRG,MAAOF,OAIhB,IAEItB,OAAOyB,QA4IlB,OAzIAlC,MAAKnC,qBAAuB,SAASsE,YAAaC,UAC9C,GAAIC,WAAaD,aACbE,OAASH,YAAYI,KAAK,KAC1BC,cAAgB,QAChBC,aAAe,iDACfC,MAAQ,KACRC,OAAUN,UAAUM,QAAU,UAG9BC,QAAU5C,KAAKI,YACfyC,SAAW,WACX,GAAIC,WAAYF,QAAQ/B,MAAM,KAC1BkC,SAAWD,UAAU,GACrBE,KAAOF,UAAU,GACjBG,IAAMF,SAAW,KAAOC,IAC5B,OAAOC,QAEPC,aAAeN,QAAUH,aAAeU,SAASxE,OACjDyE,YACApD,KAAKI,YAAa,iBAClB,kBAAmBoC,cACnB,cAAexC,KAAKE,WACpB,iBAAkBgD,aAClB,UAAWZ,OACX,WAAYK,OACZ,UAAWD,OACbH,KAAK,GAGP,QACItE,UAAWmF,WACXxE,YAAaiE,SACb9D,YAAamE,aACbjE,OAAQsB,gBAIhBP,KAAKqD,MAAQ,SAASlB,YAAaC,UAC/B,GAAI1B,OAAQ5D,GAAG4D,QACX4C,KAAwB,gBAAVC,OAAqB,QAAU,SAGpC,WAATD,OAEKC,MAAMC,SAASC,cAChBH,KAAO,WAIf,IAAI1F,QAASoC,KAAKnC,qBAAqBsE,YAAaC,SAGpD,QAAQkB,MACJ,IAAK,QAED,GAAII,iBACA,aACA,cACA,uBACA,iBACFnB,KAAK,KAEHoB,QAAUC,QAAQC,aAAaC,KAAKlG,OAAOK,UAAW,SAAUyF,eACpEC,SAAQI,iBAAiB,WAAY,SAASrF,GACA,IAAtCA,EAAEuE,IAAInE,QAAQlB,OAAOmB,cACrBwB,cAAc7B,EAAEuE,KAAK/D,KAAK,SAASL,MAC/B8E,QAAQK,QACRtD,MAAMkB,QAAQ/C,OAEf,SAASH,GACRiF,QAAQK,QACRtD,MAAMsB,OAAOtD,MAIzB,MACJ,KAAK,UACD,GAAIuF,QAAS,IACTC,MAAQ,IACRC,KAAQC,OAAOF,MAAQ,EAAMA,MAAQ,EACrCG,IAAOD,OAAOH,OAAS,EAAMA,OAAS,EACtCK,kBACA,YACA,aACA,gBACA,WACA,YACA,eACA,cACA,gBACA,SAAWJ,MACX,UAAYD,OACZ,OAASI,IACT,QAAUF,MACZ5B,KAAK,KAEHlE,QAAS,EACTC,UAAYhC,QAAQiC,QAAQC,QAE5BC,IADSD,OAAOsF,KAAKlG,OAAOK,UAAW,aAAcqG,kBAChD,SAAS5F,GACTL,QAAUK,EAAEC,SAAWf,OAAOgB,aAAsD,IAAvCF,EAAEG,KAAKC,QAAQlB,OAAOmB,eAEpET,UAAUU,OAAO,UAAWP,IAC5B8B,cAAc7B,EAAEG,MAAMK,KAAK,SAASL,MAChC6B,MAAMkB,QAAQ/C,OACf,SAASH,GACRgC,MAAMsB,OAAOtD,KAEjBL,QAAS,IAGjBC,WAAUJ,KAAK,UAAWO,IAIlC,MAAOiC,OAAMwB,SAGjBlC,KAAKuE,IAAM,SAASC,OAChB,GAAI9D,OAAQ5D,GAAG4D,QACX+D,YAAczE,KAAKK,gBAcvB,OAbAN,MAAK2E,KAAK,6BACFC,QAAS3E,KAAKI,YACdoE,MAAOA,QAEPI,cAAe,UAAYH,cAE9BI,QAAQ,SAAShG,MACd6B,MAAMkB,QAAQ/C,QAEjBoD,MAAM,SAAS6C,KACZpE,MAAMsB,OAAO8C,OAGdpE,MAAMwB,SAGVlC"}